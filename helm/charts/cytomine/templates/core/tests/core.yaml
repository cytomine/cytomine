apiVersion: v1
kind: Pod
metadata:
  name: "core-test-connection"
  labels:
  annotations:
    "helm.sh/hook": test
spec:
  securityContext:
  {{- include "cytomine.podSecurityContext" . | nindent 4 }}
  containers:
    - name: curl
      image: curlimages/curl
      command: ["curl"]
      args: ["-f", '{{ include "core.url" . }}/server/ping']
      securitycontext:
      {{- include "cytomine.containersecuritycontext" . | nindent 6 }}
      restartPolicy: Never
---
apiVersion: v1
kind: Pod
metadata:
  name: "e2e-tests"
  labels:
  annotations:
    "helm.sh/hook": test
spec:
  securityContext:
  {{- include "cytomine.podSecurityContext" . | nindent 4 }}
  containers:
    - name: e2e-tests
      image: "{{ .Values.images.e2e_tests }}"
      securitycontext:
      {{- include "cytomine.containersecuritycontext" . | nindent 6 }}
      restartPolicy: Never
